; SPIR-V
; Version: 1.0
; Generator: rspirv
; Bound: 217
OpCapability Shader
OpExtension "SPV_KHR_storage_buffer_storage_class"
%1 = OpExtInstImport "GLSL.std.450"
OpMemoryModel Logical GLSL450
OpEntryPoint GLCompute %58 "main" %55
OpExecutionMode %58 LocalSize 64 1 1
OpSource GLSL 450
OpName %3 "NUM_PARTICLES"
OpMemberName %16 0 "pos"
OpMemberName %16 1 "vel"
OpName %16 "Particle"
OpMemberName %17 0 "deltaT"
OpMemberName %17 1 "rule1Distance"
OpMemberName %17 2 "rule2Distance"
OpMemberName %17 3 "rule3Distance"
OpMemberName %17 4 "rule1Scale"
OpMemberName %17 5 "rule2Scale"
OpMemberName %17 6 "rule3Scale"
OpName %17 "SimParams"
OpMemberName %19 0 "particles"
OpName %19 "Particles"
OpName %4 "u32"
OpName %21 "ptr<Particles>"
OpName %22 "ptr<unknown>"
OpName %23 "ptr<Particle>"
OpName %6 "f32"
OpName %15 "vec2<f32>"
OpName %8 "i32"
OpName %24 "ptr<SimParams>"
OpName %25 "ptr<unknown>"
OpName %21 "ptr<Particles>"
OpName %22 "ptr<unknown>"
OpName %23 "ptr<Particle>"
OpName %26 "params"
OpName %29 "particlesSrc"
OpName %30 "particlesDst"
OpName %31 "vPos"
OpName %33 "vVel"
OpName %35 "cMass"
OpName %38 "cVel"
OpName %40 "colVel"
OpName %42 "cMassCount"
OpName %45 "cVelCount"
OpName %47 "pos"
OpName %49 "vel"
OpName %51 "i"
OpName %55 "global_invocation_id"
OpName %58 "main"
OpMemberDecorate %16 0 Offset 0
OpMemberDecorate %16 1 Offset 8
OpMemberDecorate %17 0 Offset 0
OpMemberDecorate %17 1 Offset 4
OpMemberDecorate %17 2 Offset 8
OpMemberDecorate %17 3 Offset 12
OpMemberDecorate %17 4 Offset 16
OpMemberDecorate %17 5 Offset 20
OpMemberDecorate %17 6 Offset 24
OpDecorate %18 ArrayStride 16
OpMemberDecorate %19 0 Offset 0
OpDecorate %26 DescriptorSet 0
OpDecorate %26 Binding 0
OpDecorate %27 Block
OpMemberDecorate %27 0 Offset 0
OpDecorate %29 NonWritable
OpDecorate %29 DescriptorSet 0
OpDecorate %29 Binding 1
OpDecorate %19 Block
OpDecorate %30 DescriptorSet 0
OpDecorate %30 Binding 2
OpDecorate %19 Block
OpDecorate %55 BuiltIn GlobalInvocationId
%2 = OpTypeVoid
%4 = OpTypeInt 32 0
%3 = OpConstant  %4  1500
%6 = OpTypeFloat 32
%5 = OpConstant  %6  0.0
%8 = OpTypeInt 32 1
%7 = OpConstant  %8  0
%9 = OpConstant  %4  0
%10 = OpConstant  %8  1
%11 = OpConstant  %4  1
%12 = OpConstant  %6  0.1
%13 = OpConstant  %6  -1.0
%14 = OpConstant  %6  1.0
%15 = OpTypeVector %6 2
%16 = OpTypeStruct %15 %15
%17 = OpTypeStruct %6 %6 %6 %6 %6 %6 %6
%18 = OpTypeRuntimeArray %16
%19 = OpTypeStruct %18
%20 = OpTypeVector %4 3
%21 = OpTypePointer StorageBuffer %19
%22 = OpTypePointer StorageBuffer %18
%23 = OpTypePointer StorageBuffer %16
%24 = OpTypePointer Uniform %17
%25 = OpTypePointer Function %15
%27 = OpTypeStruct %17
%28 = OpTypePointer Uniform %27
%26 = OpVariable  %28  Uniform
%29 = OpVariable  %21  StorageBuffer
%30 = OpVariable  %21  StorageBuffer
%32 = OpConstantNull  %15
%34 = OpConstantNull  %15
%36 = OpTypePointer Function %15
%37 = OpConstantNull  %15
%39 = OpConstantNull  %15
%41 = OpConstantNull  %15
%43 = OpTypePointer Function %8
%44 = OpConstantNull  %8
%46 = OpConstantNull  %8
%48 = OpConstantNull  %15
%50 = OpConstantNull  %15
%52 = OpTypePointer Function %4
%53 = OpConstantNull  %4
%56 = OpTypePointer Input %20
%55 = OpVariable  %56  Input
%59 = OpTypeFunction %2
%63 = OpTypeBool
%67 = OpTypePointer StorageBuffer %15
%96 = OpTypePointer Uniform %6
%110 = OpConstant  %4  2
%124 = OpConstant  %4  3
%159 = OpConstant  %4  4
%165 = OpConstant  %4  5
%171 = OpConstant  %4  6
%188 = OpTypePointer Function %6
%58 = OpFunction  %2  None %59
%54 = OpLabel
%51 = OpVariable  %52  Function %53
%45 = OpVariable  %43  Function %46
%38 = OpVariable  %36  Function %39
%31 = OpVariable  %25  Function %32
%47 = OpVariable  %25  Function %48
%40 = OpVariable  %36  Function %41
%33 = OpVariable  %25  Function %34
%49 = OpVariable  %25  Function %50
%42 = OpVariable  %43  Function %44
%35 = OpVariable  %36  Function %37
%57 = OpLoad  %20  %55
%60 = OpAccessChain  %24  %26 %9
OpBranch %61
%61 = OpLabel
%62 = OpCompositeExtract  %4  %57 0
%64 = OpUGreaterThanEqual  %63  %62 %3
OpSelectionMerge %65 None
OpBranchConditional %64 %66 %65
%66 = OpLabel
OpReturn
%65 = OpLabel
%68 = OpAccessChain  %67  %29 %9 %62 %9
%69 = OpLoad  %15  %68
OpStore %31 %69
%70 = OpAccessChain  %67  %29 %9 %62 %11
%71 = OpLoad  %15  %70
OpStore %33 %71
%72 = OpCompositeConstruct  %15  %5 %5
OpStore %35 %72
%73 = OpCompositeConstruct  %15  %5 %5
OpStore %38 %73
%74 = OpCompositeConstruct  %15  %5 %5
OpStore %40 %74
OpStore %42 %7
OpStore %45 %7
OpStore %51 %9
OpBranch %75
%75 = OpLabel
OpLoopMerge %76 %78 None
OpBranch %77
%77 = OpLabel
%79 = OpLoad  %4  %51
%80 = OpUGreaterThanEqual  %63  %79 %3
OpSelectionMerge %81 None
OpBranchConditional %80 %82 %81
%82 = OpLabel
OpBranch %76
%81 = OpLabel
%83 = OpLoad  %4  %51
%84 = OpIEqual  %63  %83 %62
OpSelectionMerge %85 None
OpBranchConditional %84 %86 %85
%86 = OpLabel
OpBranch %78
%85 = OpLabel
%87 = OpLoad  %4  %51
%88 = OpAccessChain  %67  %29 %9 %87 %9
%89 = OpLoad  %15  %88
OpStore %47 %89
%90 = OpLoad  %4  %51
%91 = OpAccessChain  %67  %29 %9 %90 %11
%92 = OpLoad  %15  %91
OpStore %49 %92
%93 = OpLoad  %15  %47
%94 = OpLoad  %15  %31
%95 = OpExtInst  %6  %1 Distance %93 %94
%97 = OpAccessChain  %96  %60 %11
%98 = OpLoad  %6  %97
%99 = OpFOrdLessThan  %63  %95 %98
OpSelectionMerge %100 None
OpBranchConditional %99 %101 %100
%101 = OpLabel
%102 = OpLoad  %15  %35
%103 = OpLoad  %15  %47
%104 = OpFAdd  %15  %102 %103
OpStore %35 %104
%105 = OpLoad  %8  %42
%106 = OpIAdd  %8  %105 %10
OpStore %42 %106
OpBranch %100
%100 = OpLabel
%107 = OpLoad  %15  %47
%108 = OpLoad  %15  %31
%109 = OpExtInst  %6  %1 Distance %107 %108
%111 = OpAccessChain  %96  %60 %110
%112 = OpLoad  %6  %111
%113 = OpFOrdLessThan  %63  %109 %112
OpSelectionMerge %114 None
OpBranchConditional %113 %115 %114
%115 = OpLabel
%116 = OpLoad  %15  %40
%117 = OpLoad  %15  %47
%118 = OpLoad  %15  %31
%119 = OpFSub  %15  %117 %118
%120 = OpFSub  %15  %116 %119
OpStore %40 %120
OpBranch %114
%114 = OpLabel
%121 = OpLoad  %15  %47
%122 = OpLoad  %15  %31
%123 = OpExtInst  %6  %1 Distance %121 %122
%125 = OpAccessChain  %96  %60 %124
%126 = OpLoad  %6  %125
%127 = OpFOrdLessThan  %63  %123 %126
OpSelectionMerge %128 None
OpBranchConditional %127 %129 %128
%129 = OpLabel
%130 = OpLoad  %15  %38
%131 = OpLoad  %15  %49
%132 = OpFAdd  %15  %130 %131
OpStore %38 %132
%133 = OpLoad  %8  %45
%134 = OpIAdd  %8  %133 %10
OpStore %45 %134
OpBranch %128
%128 = OpLabel
OpBranch %78
%78 = OpLabel
%135 = OpLoad  %4  %51
%136 = OpIAdd  %4  %135 %11
OpStore %51 %136
OpBranch %75
%76 = OpLabel
%137 = OpLoad  %8  %42
%138 = OpSGreaterThan  %63  %137 %7
OpSelectionMerge %139 None
OpBranchConditional %138 %140 %139
%140 = OpLabel
%141 = OpLoad  %15  %35
%142 = OpLoad  %8  %42
%143 = OpConvertSToF  %6  %142
%144 = OpCompositeConstruct  %15  %143 %143
%145 = OpFDiv  %15  %141 %144
%146 = OpLoad  %15  %31
%147 = OpFSub  %15  %145 %146
OpStore %35 %147
OpBranch %139
%139 = OpLabel
%148 = OpLoad  %8  %45
%149 = OpSGreaterThan  %63  %148 %7
OpSelectionMerge %150 None
OpBranchConditional %149 %151 %150
%151 = OpLabel
%152 = OpLoad  %15  %38
%153 = OpLoad  %8  %45
%154 = OpConvertSToF  %6  %153
%155 = OpCompositeConstruct  %15  %154 %154
%156 = OpFDiv  %15  %152 %155
OpStore %38 %156
OpBranch %150
%150 = OpLabel
%157 = OpLoad  %15  %33
%158 = OpLoad  %15  %35
%160 = OpAccessChain  %96  %60 %159
%161 = OpLoad  %6  %160
%162 = OpVectorTimesScalar  %15  %158 %161
%163 = OpFAdd  %15  %157 %162
%164 = OpLoad  %15  %40
%166 = OpAccessChain  %96  %60 %165
%167 = OpLoad  %6  %166
%168 = OpVectorTimesScalar  %15  %164 %167
%169 = OpFAdd  %15  %163 %168
%170 = OpLoad  %15  %38
%172 = OpAccessChain  %96  %60 %171
%173 = OpLoad  %6  %172
%174 = OpVectorTimesScalar  %15  %170 %173
%175 = OpFAdd  %15  %169 %174
OpStore %33 %175
%176 = OpLoad  %15  %33
%177 = OpExtInst  %15  %1 Normalize %176
%178 = OpLoad  %15  %33
%179 = OpExtInst  %6  %1 Length %178
%180 = OpExtInst  %6  %1 FClamp %179 %5 %12
%181 = OpVectorTimesScalar  %15  %177 %180
OpStore %33 %181
%182 = OpLoad  %15  %31
%183 = OpLoad  %15  %33
%184 = OpAccessChain  %96  %60 %9
%185 = OpLoad  %6  %184
%186 = OpVectorTimesScalar  %15  %183 %185
%187 = OpFAdd  %15  %182 %186
OpStore %31 %187
%189 = OpAccessChain  %188  %31 %9
%190 = OpLoad  %6  %189
%191 = OpFOrdLessThan  %63  %190 %13
OpSelectionMerge %192 None
OpBranchConditional %191 %193 %192
%193 = OpLabel
%194 = OpAccessChain  %188  %31 %9
OpStore %194 %14
OpBranch %192
%192 = OpLabel
%195 = OpAccessChain  %188  %31 %9
%196 = OpLoad  %6  %195
%197 = OpFOrdGreaterThan  %63  %196 %14
OpSelectionMerge %198 None
OpBranchConditional %197 %199 %198
%199 = OpLabel
%200 = OpAccessChain  %188  %31 %9
OpStore %200 %13
OpBranch %198
%198 = OpLabel
%201 = OpAccessChain  %188  %31 %11
%202 = OpLoad  %6  %201
%203 = OpFOrdLessThan  %63  %202 %13
OpSelectionMerge %204 None
OpBranchConditional %203 %205 %204
%205 = OpLabel
%206 = OpAccessChain  %188  %31 %11
OpStore %206 %14
OpBranch %204
%204 = OpLabel
%207 = OpAccessChain  %188  %31 %11
%208 = OpLoad  %6  %207
%209 = OpFOrdGreaterThan  %63  %208 %14
OpSelectionMerge %210 None
OpBranchConditional %209 %211 %210
%211 = OpLabel
%212 = OpAccessChain  %188  %31 %11
OpStore %212 %13
OpBranch %210
%210 = OpLabel
%213 = OpLoad  %15  %31
%214 = OpAccessChain  %67  %30 %9 %62 %9
OpStore %214 %213
%215 = OpLoad  %15  %33
%216 = OpAccessChain  %67  %30 %9 %62 %11
OpStore %216 %215
OpReturn
OpFunctionEnd